spring:
  kafka:
    bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
    listener:
      concurrency: ${KAFKA_LISTENER_CONCURRENCY:2}
    consumer:
      group-id: ${KAFKA_CONSUMER_GROUP_ID:cg-review-recommendation}
      auto-offset-reset: latest
      enable-auto-commit: false
  neo4j:
    uri: ${NEO4J_URI:bolt://localhost:7687}
    authentication:
      username: ${NEO4J_USERNAME:neo4j}
      password: ${NEO4J_PASSWORD:password}

  elasticsearch:
    uris: ${ELASTICSEARCH_URI:http://localhost:9200}
    connection-timeout: 5s
    socket-timeout: 30s

  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}

# Recommendation specific settings
recommendation:
  async:
    core-pool-size: ${RECOMMENDATION_ASYNC_CORE_POOL_SIZE:4}
    max-pool-size: ${RECOMMENDATION_ASYNC_MAX_POOL_SIZE:8}
    queue-capacity: ${RECOMMENDATION_ASYNC_QUEUE_CAPACITY:500}
  graph:
    batch-size: 100
    max-hops: 2
  search:
    max-candidates: 500
    min-score: 0.1
  scoring:
    weights:
      graph: 0.4
      semantic: 0.3
      engagement: 0.15
      popularity: 0.1
      freshness: 0.05
  cache:
    ttl-hours: 3
  review:
    max-candidates: 300
    highlight:
      max-candidates: 300
      es-weight: 0.6
      graph-weight: 0.4
    cache:
      ttl-hours: 2
      max-items: 100
    scoring:
      weights:
        popularity: 0.35
        freshness: 0.15
        engagement: 0.2
        content: 0.2
        book-context: 0.1
  tracking:
    weights:
      impression: 0.05
      click: 0.3
      dwell-per-ms: 0.001
      scroll-per-pct: 0.005
      bookmark: 1.0
      like: 0.6
      follow: 0.8
      review-create: 0.4
      review-update: 0.4
    caps:
      dwell-max: 1.5
      scroll-max: 0.5

logging:
  level:
    org.springframework.data.neo4j: INFO
    org.springframework.data.elasticsearch: INFO
    org.yyubin.recommendation: DEBUG
